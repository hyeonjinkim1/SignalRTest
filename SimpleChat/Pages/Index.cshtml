@page
@model SimpleChat.Pages.IndexModel
@{
}
<header>
    <h1>Chat & Push Codelab</h1>
</header>

<link href="~/styles/index.css" rel="stylesheet" />

<div class="container">
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-2">User</div>
        <div class="col-4"><input type="text" id="userInput" /></div>
    </div>
    <div class="row">
        <div class="col-2">Message</div>
        <div class="col-4"><input type="text" id="messageInput" /></div>
    </div>
    <div class="row">&nbsp;</div>
    <div class="row">
        <div class="col-6">
            <input type="button" id="sendButton" value="Send Message" />
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <hr />
    </div>
</div>
<div class="row">
    <div class="col-6">
        <ul id="messagesList"></ul>
    </div>
</div>

<main>
    <p>
        Welcome to the push messaging codelab. The button below needs to be
        fixed to support subscribing to push.
    </p>
    <p>
        <button disabled class="js-push-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
            Enable Push Messaging
        </button>
    </p>
    <section class="subscription-details js-subscription-details is-invisible">
        <p>
            Once you've subscribed your user, you'd send their subscription to your
            server to store in a database so that when you want to send a message
            you can lookup the subscription and send a message to it.
        </p>
        <p>
            To simplify things for this code lab copy the following details
            into the <a href="https://web-push-codelab.glitch.me//">
                Push Companion
                Site
            </a> and it'll send a push message for you, using the application
            server keys on the site - so make sure they match.
        </p>
        <pre><code class="js-subscription-json"></code></pre>
    </section>
</main>

@*
    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/chat.js"></script>
*@
<script>

    // Enable pusher logging - don't include this in production
    Pusher.logToConsole = true;

    var pusher = new Pusher('1f8dce6a40baabcac9a2', {
        cluster: 'us2'
    });

    var channel = pusher.subscribe('my-channel');
    channel.bind('my-event', function (data) {
        alert(JSON.stringify(data));
    });
</script>
@*<script src="https://js.pusher.com/7.0/pusher.min.js"></script>*@
<script src="~/lib/microsoft/signalr/dist/browser/signalr.min.js"></script>
<script src="~/js/simplechat.js"></script>
<script src="~/js/main.js"></script>
<script src="~/js/sw.js"></script>